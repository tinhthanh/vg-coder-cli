<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Worker</title>
    <!-- CSS & JS Injected via Gulp -->
</head>
<body style="display: none;">
    <!-- BUBBLE INTERFACE -->
    <div id="vg-bubble" class="vg-bubble" title="VG Coder (Click to Open, Drag to Move)">
        <div class="vg-bubble-icon"><img style="width: 64px;" src="https://phanmemvet.vn/wp-content/vetgo/pawai.gif"></div>
        <!-- Quick Action Menu (Shows on hover) - Features rendered dynamically by bubble.js -->
        <div class="vg-bubble-menu">
            <!-- Features rendered dynamically -->
        </div>
    </div>

    <!-- MAIN DASHBOARD INTERFACE -->
    <div class="split-layout">
        
        <!-- TOOL WINDOW BAR (IDE-Style Sidebar) -->
        <div id="tool-window-bar" class="tool-window-bar">
            <button class="tool-window-icon" data-panel="project" data-tooltip="Project" title="Project">
                üìÅ
            </button>
            <button class="tool-window-icon" data-panel="git" data-tooltip="Git" title="Git">
                üîÄ
            </button>
            <button class="tool-window-icon" data-panel="commands" data-tooltip="Commands" title="Saved Commands">
                ‚ö°
            </button>
            
            <!-- Action Buttons at bottom -->
            <div class="tool-window-spacer"></div>
            <button class="tool-window-action-btn" id="stop-server-btn" onclick="window.stopServer()" title="Stop Server">üõë</button>
            <button class="tool-window-action-btn" id="theme-toggle" title="Toggle Dark Mode">
                <span id="theme-icon">üåô</span>
            </button>
        </div>

        <!-- TOOL PANEL CONTAINER (Expandable Panels) -->
        <div id="tool-panel-container" class="tool-panel-container">
            <!-- Project Panel -->
            <div id="tool-panel-project" class="tool-panel">
                <div class="tool-panel-header">
                    <div class="tool-panel-title">
                        <span>üìÅ</span>
                        <span>Project</span>
                    </div>
                    <div class="tool-panel-actions">
                        <button class="tool-panel-action-btn" onclick="window.closeToolPanels()" title="Close">‚úï</button>
                    </div>
                </div>
                <div id="project-panel-content" class="tool-panel-content">
                    <!-- Project tree will be rendered here by project-panel.js -->
                </div>
            </div>

            <!-- Git Panel -->
            <div id="tool-panel-git" class="tool-panel">
                <div class="tool-panel-header">
                    <div class="tool-panel-title">
                        <span>üîÄ</span>
                        <span>Git</span>
                    </div>
                    <div class="tool-panel-actions">
                        <button class="tool-panel-action-btn" id="git-panel-refresh-btn" title="Refresh">üîÑ</button>
                        <button class="tool-panel-action-btn" onclick="window.closeToolPanels()" title="Close">‚úï</button>
                    </div>
                </div>
                <div id="git-panel-content" class="tool-panel-content">
                    <!-- Git view will be rendered here by git-panel.js -->
                </div>
            </div>

            <!-- Commands Panel -->
            <div id="tool-panel-commands" class="tool-panel">
                <div class="tool-panel-header">
                    <div class="tool-panel-title">
                        <span>‚ö°</span>
                        <span>Commands</span>
                    </div>
                    <div class="tool-panel-actions">
                        <button class="tool-panel-action-btn" onclick="window.closeToolPanels()" title="Close">‚úï</button>
                    </div>
                </div>
                <div id="commands-panel-content" class="tool-panel-content">
                    <!-- Content will be rendered by commands-panel.js -->
                </div>
            </div>
        </div>

        <div id="resize-handler" class="resize-handler"></div>

        <div class="right-panel">
            <div id="tabs-header" class="tabs-header">
                <div class="tabs-scroll-area">
                    <div id="file-tabs-container" style="display:flex; height:100%;"></div>
                </div>
                <div class="tabs-actions">
                    <button id="git-view-toggle" class="action-btn-mini" title="Toggle Git View"><span style="font-size:12px">Git</span></button>
                </div>
            </div>
            <div id="git-view-container" class="git-view-container"></div>
            <div class="editor-container" style="flex: 1; position: relative; overflow: hidden;">
                <!-- REPLACED MONACO WITH CODE VIEWER -->
                <div id="code-viewer-container" class="code-viewer-container">
                    <div class="empty-editor">Select a file to view</div>
                </div>
            </div>
        </div>

        <div id="resize-handler-right" class="resize-handler resize-handler-right"></div>

        <!-- RIGHT TOOL PANEL CONTAINER (Expandable Panels) -->
        <div id="tool-panel-container-right" class="tool-panel-container tool-panel-container-right">
            <!-- Agent Panel -->
            <div id="tool-panel-agent" class="tool-panel">
                <div class="tool-panel-header">
                    <div class="tool-panel-title">
                        <span>ü§ñ</span>
                        <span>Agent</span>
                    </div>
                    <div class="tool-panel-actions">
                        <button class="tool-panel-action-btn" onclick="window.closeToolPanelsRight()" title="Close">‚úï</button>
                    </div>
                </div>
                <div id="agent-panel-content" class="tool-panel-content">
                    <!-- Agent panel content will be rendered here -->
                </div>
            </div>

            <!-- Browser Panel -->
            <div id="tool-panel-browser" class="tool-panel">
                <div class="tool-panel-header">
                    <div class="tool-panel-title">
                        <span>üåê</span>
                        <span>Browser</span>
                    </div>
                    <div class="tool-panel-actions">
                        <button class="tool-panel-action-btn" onclick="window.closeToolPanelsRight()" title="Close">‚úï</button>
                    </div>
                </div>
                <div id="browser-panel-content" class="tool-panel-content">
                    <!-- Browser panel content will be rendered here -->
                </div>
            </div>
        </div>

        <!-- RIGHT TOOL WINDOW BAR (IDE-Style Sidebar) -->
        <div id="tool-window-bar-right" class="tool-window-bar tool-window-bar-right">
            <button class="tool-window-icon" data-panel="agent" data-tooltip="Agent" title="Agent">
                ü§ñ
            </button>
            <button class="tool-window-icon" data-panel="browser" data-tooltip="Browser" title="Browser">
                üåê
            </button>
        </div>
    </div>

    <!-- Modals & Overlays -->
    <div id="floating-terminals-layer"></div>
    <div class="toast" id="toast"></div>
    <div id="command-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3 id="modal-title">Add Command</h3>
            <form id="command-form">
                <div class="form-group"><label>Icon (emoji)</label><input type="text" id="command-icon" placeholder="üöÄ" maxlength="2" required></div>
                <div class="form-group"><label>Name</label><input type="text" id="command-name" placeholder="Run Dev Server" required></div>
                <div class="form-group"><label>Command</label><input type="text" id="command-text" placeholder="npm run dev" required></div>
                <div class="modal-actions">
                    <button type="button" class="btn" onclick="closeCommandModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Keyboard Shortcuts Help Overlay -->
    <div id="shortcuts-help" class="vg-shortcuts-help">
        <div class="vg-shortcuts-panel">
            <div class="vg-shortcuts-header">
                <div class="vg-shortcuts-title">
                    <span>‚å®Ô∏è</span>
                    <span>Keyboard Shortcuts</span>
                </div>
                <button class="vg-shortcuts-close" onclick="window.toggleShortcutsHelp()">√ó</button>
            </div>
            <div id="shortcuts-list" class="vg-shortcuts-list">
                <!-- Shortcuts will be rendered dynamically by keyboard-shortcuts.js -->
            </div>
            <div class="vg-shortcuts-footer">
                Press <kbd class="vg-shortcut-key">Cmd</kbd> + <kbd class="vg-shortcut-key">/</kbd> to toggle this help
            </div>
        </div>
    </div>
    
    <!-- Scripts injected via Gulp -->
</body>
</html>
